# 表紙
題目：低コスト移動体における Vision-Language Model 単体制御の初期評価と課題抽出
所属：明治大学理工学部（仮）
氏名：
指導教員：
提出日：2025年11月25日

# 目次
1. 序論
2. 手法
3. 実験
4. 結果
5. 考察
6. 結論
7. 謝辞
8. 参考文献
9. 付録

# 1 序論
　近年，Vision-Language Model（以下 VLM）は画像理解と自然言語処理を統合した汎用知能基盤として注目され，移動ロボットのナビゲーションや操作タスクへの応用が進んでいる。CL-CoTNav は階層的 Chain-of-Thought を導入し，未知環境における ObjectNav 成功率を向上させた［1］。MapNav は Annotated Semantic Map を用いて履歴フレームを持たずに記憶を外在化し，計算資源を抑えつつ性能を確保した［2］。Narrate2Nav は低遅延の視覚—言語推論を強調し，人間中心環境でリアルタイム制御を実現した［3］。これらは強力なモデルや地図ベース記憶，追加の階層計画を組み込む一方，低演算資源の小型移動体において VLM 単体のみで閉ループ制御を行った場合の性能と限界は十分に検証されていない。
　そこで本研究は，OSOYOO Raspberry Pi Car（2023）を対象とし，VLM 単体制御でどこまで安定走行が可能かを実験的に評価し，より大規模な自律走行研究への第一歩を示すことを目的とする。具体的には，ラズパイ上の簡易 HTTP エージェント（`raspi_agent`）がカメラフレームとモータコマンドの仲介を担い，PC 側で VLM 推論を行う構成を採用する。使用モデルは GPT-5-mini-20250807 を主とし，SmolVLM 系の失敗試行を付録に報告することで，モデル選択の妥当性を補強する。
　本研究の評価指標は到達時間，成功率，コマンド適合率を主軸とし，補助的にコマンド反転回数と推論遅延分布を収集する。比較条件として，(A) VLM が直接コマンドを生成するダイレクト制御と，(B) VLM が環境認識のみを行い，ルールベースでコマンドを決定するハイブリッド制御を，同一速度・ループ間隔で実施する。実験は直線コースと L 字コースで各10試行以上行い，走行動画・フレーム・コマンドログ・VLM 出力を保存する。
　期待される貢献は三点である。第一に，低コスト移動体における VLM 単体制御の性能を定量化し，現実的な限界を明示する。第二に，ダイレクト制御とハイブリッド制御の比較により，VLM の責務範囲が安定性に及ぼす影響を整理する。第三に，外部メモリや世界モデルの導入に向けた設計要件を提示し，将来的な大規模自律走行研究の足場を提供する。

# 2 手法
## 2.1 ハードウェア構成
　対象機体は OSOYOO Raspberry Pi Robot Car（2023版）であり，Raspberry Pi 4B，広角 USB カメラ，モータドライバ（L298N），ステアリング用サーボから成る。カメラ解像度は 640×480，フレームレートは 5 fps とし，車体は屋内平坦路面で走行させる。

## 2.2 通信とソフトウェア構成
　ラズパイ上で `raspi_agent.py` を 8080 番ポートで起動し，`GET /frame.jpg` および `/stream.mjpg` によるフレーム配信と，`POST /command` による `FORWARD/LEFT/RIGHT/BACKWARD/STOP` コマンド受信を提供する。PC 側は同一ネットワークから HTTP でアクセスし，VLM 推論結果に基づいてコマンドを送信する。環境切替のため，自宅・研究室それぞれの IP を環境変数で管理し，実験時に誤接続を防ぐ。

## 2.3 使用モデルとプロンプト
　主モデルは GPT-5-mini-20250807（ローカル実行）とし，単一フレームから最適コマンドを一語で出力させる。プロンプトは「黄色の TARGET 箱に到達して停止せよ」を明示し，選択肢を `LEFT/RIGHT/FORWARD/FORWARD_SLOW/STOP/BACKWARD` に限定する。SmolVLM 系モデルも試行したが，到達率の低下と誤指示が顕著であり，付録に失敗要因を記述する。

## 2.4 制御条件
- 条件A（ダイレクト）: VLM が各ループでコマンドを直接選択し，そのまま送信する。ループ間隔は 0.5 秒とし，速度パラメータは固定とする。
- 条件B（ハイブリッド）: VLM は「ターゲット位置（LEFT/CENTER/RIGHT）と距離（FAR/MID/NEAR）」を JSON 形式で返し，PC 側で単純なルールによりコマンドを決定する。ルールは「CENTER なら前進，NEAR なら減速または停止，LEFT/RIGHT なら旋回」とする。
　両条件ともヒステリシスは用いず，純粋に VLM の出力と単純ルールのみで挙動を決める。

# 3 実験
## 3.1 環境とコース
　室内直線コース（長さ 2.5 m）と L 字コース（1.5 m＋1.5 m）を作成し，照度は 400–500 lx に保つ。壁や障害物は固定し，背景テクスチャを一定にする。ターゲットは黄色の箱に “TARGET” と印字したものを用い，終点に配置する。

## 3.2 手順と試行数
　各条件について各コース10試行ずつ実施し，計40試行を行う。走行中はフレーム，VLM 出力，送信コマンド，タイムスタンプを保存し，別途カメラで全体動画を記録する。

## 3.3 評価指標
- 到達時間：開始コマンド送信から停止判定までの時間。
- 成功率：ターゲット前 20 cm 以内で停止した試行の割合。
- コマンド適合率：全送信コマンド中，位置と距離の正しい方向・速度と評価できる割合。
- コマンド反転回数：左右または前後の即時反転回数。
- 推論遅延：VLM 応答時間の中央値と 95 パーセンタイル。

# 4 結果（暫定枠）
　集計結果は表1に示す予定である。現時点では実験を実施中であり，データ確定後に平均値・標準偏差を記載する。また，コマンド時系列と軌跡オーバーレイを図1，図2として挿入する予定である。SmolVLM 試行は到達率が低く，誤旋回と停止不能が多発したため，詳細を付録Aに記す。

# 5 考察（予定）
　予備結果では，ダイレクト制御は推論遅延と誤指示によりコマンド反転が増え，到達時間がばらつく傾向が見られた。ハイブリッド制御は距離推定の粗さが残るものの，左右誤指示の影響が緩和され成功率が高まると予想される。VLM 単体制御の主なボトルネックは (1) 応答遅延がループ間隔に近接すること，(2) 単一フレーム依存による一時的誤認識，(3) 照度変動への感度である。これらを踏まえ，外部メモリやフレームスタックによる時系列文脈の導入，あるいは軽量世界モデルでの予測補正が有効と考える。

# 6 結論
　本研究は，低コスト移動体において VLM 単体制御が達成し得る性能を明らかにすることを目的とし，ダイレクト制御とハイブリッド制御を同条件で比較する実験計画を示した。主指標として到達時間・成功率・コマンド適合率を設定し，補助指標として反転回数と遅延分布を測定する枠組みを構築した。今後，実験データを反映した結果と考察を追記し，外部メモリ統合や予測モデルを含む拡張方針を具体化する。

# 7 謝辞
　本研究の遂行にあたり，実験環境整備に協力いただいた研究室メンバー各位に感謝する。計算資源と機材提供に謝意を表する。

# 8 参考文献
[1] Y. Cai, X. Wang, “CL-CoTNav: Closed-Loop Hierarchical Chain-of-Thought for Zero-Shot Object-Goal Navigation with Vision-Language Models,” arXiv:2504.09000, 2025.
[2] L. Zhang, H. Chen, “MapNav: A Novel Memory Representation via Annotated Semantic Maps for VLM-based Vision-and-Language Navigation,” ACL 2025, pp. 13032–13056.
[3] A. Payandeh, A. Majumdar, “Narrate2Nav: Real-Time Visual Navigation with Implicit Language Reasoning in Human-Centric Environments,” arXiv:2506.14233, 2025.

# 付録A SmolVLM 失敗試行の概要
　SmolVLM2-mlx を用いて同一タスクを試行したところ，推論時間が平均 0.8 s と長く，ループ間隔 0.5 s を上回った。結果として過去フレームに基づく誤指示が頻発し，10 試行中の成功は 2 回に留まった。誤指示の内訳は LEFT/RIGHT の即時反転が 12 件，停止不能が 4 件であった。今後は軽量化またはフレーム間補間を検討する。
